<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>spring</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.eb5f38e4.css" as="style"><link rel="preload" href="/assets/js/app.44fe8535.js" as="script"><link rel="preload" href="/assets/js/3.9cc2d08d.js" as="script"><link rel="preload" href="/assets/js/1.b21f7e85.js" as="script"><link rel="preload" href="/assets/js/12.d9fbb69c.js" as="script"><link rel="prefetch" href="/assets/js/10.a437c854.js"><link rel="prefetch" href="/assets/js/11.9ec6bfad.js"><link rel="prefetch" href="/assets/js/13.ee390af4.js"><link rel="prefetch" href="/assets/js/14.c2e6e7cf.js"><link rel="prefetch" href="/assets/js/15.53aac9c6.js"><link rel="prefetch" href="/assets/js/16.bd6525c8.js"><link rel="prefetch" href="/assets/js/17.de915291.js"><link rel="prefetch" href="/assets/js/18.454baa3c.js"><link rel="prefetch" href="/assets/js/19.a88d1b31.js"><link rel="prefetch" href="/assets/js/4.979f9922.js"><link rel="prefetch" href="/assets/js/5.dda74e2f.js"><link rel="prefetch" href="/assets/js/6.5eed2fc3.js"><link rel="prefetch" href="/assets/js/7.48f25f21.js"><link rel="prefetch" href="/assets/js/8.e3dca3e1.js"><link rel="prefetch" href="/assets/js/9.52ebb6c2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eb5f38e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>zch1337</span>
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/touxiang.jpg" alt="" class="logo"> <!----></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/frontEnd/" class="nav-link"><i class="undefined"></i>
  frontEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/houduan/" class="nav-link router-link-active"><i class="undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/" class="nav-link"><i class="undefined"></i>
  运维
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/touxiang.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    zch1337
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>4</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>2</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41><li class="social-item" data-v-1fad0c41><i class="iconfont reco-github" style="color:#849b87;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-npm" style="color:#f26d6d;" data-v-1fad0c41></i></li></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/frontEnd/" class="nav-link"><i class="undefined"></i>
  frontEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/houduan/" class="nav-link router-link-active"><i class="undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/yunwei/" class="nav-link"><i class="undefined"></i>
  运维
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/houduan/spring.html" aria-current="page" class="active sidebar-link">spring</a></li><li><a href="/houduan/springboot.html" class="sidebar-link">springboot</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>spring</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>zch1337</span>
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page" style="padding-right:0;"><section style="display:;"><div class="page-title"><h1 class="title">spring</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>zch1337</span></i> <!----> <i class="iconfont reco-eye" data-v-8a445198><span id="/houduan/spring.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-8a445198><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="什么是spring框架"><a href="#什么是spring框架" class="header-anchor">#</a> 什么是Spring框架?</h2> <h3 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h3> <p>一个容器，整合其他框架的框架，核心AOC(控制反转)和AOP(面向切面编程)，各个领域提供解决方案。</p> <p>主要作用:</p> <ol><li>为代码解耦，降低代码间的耦合度。让对象和对象，模块和模块之间的关系不是代码关联，而是通过配置来说明。即在Spring中说明关系。理解：当某个部分坏了，不会影响了其他部分。</li> <li>使用AOC控制反转来降低业务对象的耦合度，将对象的创建，赋值交给容器。</li></ol> <h3 id="优点-特点"><a href="#优点-特点" class="header-anchor">#</a> 优点 特点</h3> <ol><li><p>轻量级</p></li> <li><p>面向接口编程</p></li> <li><p>面向切面编程AOP</p> <p>将公共的代码独立开发，需要的时候反织回去，底层原理是动态代理</p></li> <li><p>整合其他框架</p></li></ol> <h3 id="控制反转aoc"><a href="#控制反转aoc" class="header-anchor">#</a> 控制反转AOC</h3> <p>一种思想，由Spring容器进行对象的创建和依赖注入，程序员使用时直接取出使用</p> <p>正转：程序员来控制。</p> <p>反转:Spring容器来控制，程序员直接取出使用。</p> <h2 id="spring"><a href="#spring" class="header-anchor">#</a> Spring</h2> <h3 id="控制反转ioc"><a href="#控制反转ioc" class="header-anchor">#</a> 控制反转IOC</h3> <h4 id="开发步骤"><a href="#开发步骤" class="header-anchor">#</a> 开发步骤</h4> <ol><li><p>创建一个空项目</p></li> <li><p>创建一个quickstart的maven模块,补全目录结构</p></li> <li><p>配置xml文件</p> <div class="language- extra-class"><pre class="language-text"><code>    注入spring依赖
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
      &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
    资源指定
    &lt;resources&gt;
      &lt;resource&gt;
        &lt;directory&gt;src/main/java&lt;/directory&gt;
        &lt;includes&gt;
          &lt;include&gt;**/*.xml&lt;/include&gt;
          &lt;include&gt;**/*.properties&lt;/include&gt;
        &lt;/includes&gt;
      &lt;/resource&gt;
      &lt;resource&gt;
        &lt;directory&gt;src/main/resources&lt;/directory&gt;
        &lt;includes&gt;
          &lt;include&gt;**/*.xml&lt;/include&gt;
          &lt;include&gt;**/*.properties&lt;/include&gt;
        &lt;/includes&gt;
      &lt;/resource&gt;
    &lt;/resources&gt;
</code></pre></div></li> <li><p>编写applicationContext.xml文件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
 代码内容完成对象的创建和依赖注入      
       
&lt;/beans&gt;
</code></pre></div></li></ol> <h3 id="spring创建对象和依赖注入"><a href="#spring创建对象和依赖注入" class="header-anchor">#</a> Spring创建对象和依赖注入</h3> <p>创建对象：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;bean id=&quot;school&quot; class=&quot;xyz.zch1337.pojo2.School&quot;&gt;&lt;/bean&gt;
</code></pre></div><p>注入:</p> <div class="language- extra-class"><pre class="language-text"><code>    setter方法注入
    &lt;bean id=&quot;school&quot; class=&quot;xyz.zch1337.pojo2.School&quot;&gt;
        &lt;property name=&quot;name&quot; value=&quot;普通大学&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;address&quot; value=&quot;四川&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id=&quot;stu&quot; class=&quot;xyz.zch1337.pojo.Student&quot;&gt;
        &lt;property name=&quot;name&quot; value=&quot;zch&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;age&quot; value=&quot;15&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;school&quot;&gt;
            &lt;ref bean=&quot;school&quot;&gt;&lt;/ref&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
    构造方法注入
    构造方法的参数名称注入
    &lt;bean id=&quot;school&quot; class=&quot;xyz.zch1337.pojo3.School&quot;&gt;
        &lt;constructor-arg name=&quot;name&quot; value=&quot;1123&quot;&gt;			         &lt;/constructor-arg&gt;
        &lt;constructor-arg name=&quot;address&quot; value=&quot;1123&quot;&gt;				&lt;/constructor-arg&gt;
    &lt;/bean&gt;    
    构造方法的下标注入
    &lt;bean id=&quot;student&quot; class=&quot;xyz.zch1337.pojo3.Student&quot;&gt;
        &lt;constructor-arg index=&quot;0&quot; value=&quot;张三&quot;&gt;		  			&lt;/constructor-arg&gt;
        &lt;constructor-arg index=&quot;1&quot; value=&quot;123&quot;&gt;			     		 &lt;/constructor-arg&gt;
        &lt;constructor-arg index=&quot;2&quot; ref=&quot;school&quot;&gt;	   				&lt;/constructor-arg&gt;
    &lt;/bean&gt;
    构造方法的默认顺序
    &lt;bean id=&quot;student1&quot; class=&quot;xyz.zch1337.pojo3.Student&quot;&gt;
        &lt;constructor-arg value=&quot;张三&quot;&gt;&lt;/constructor-arg&gt;
        &lt;constructor-arg value=&quot;123&quot;&gt;&lt;/constructor-arg&gt;
        &lt;constructor-arg ref=&quot;school&quot;&gt;&lt;/constructor-arg&gt;
    &lt;/bean&gt;
</code></pre></div><p>使用对象:</p> <div class="language- extra-class"><pre class="language-text"><code>创建容器:
ApplicationContext ac = new ClassPathXmlApplicationContex
t(&quot;applicationContext.xml&quot;);
获取对象:
UsersController uController = (UsersController)ac.get
Bean(&quot;uController&quot;);
调用方法:
int zch = uController.insert(new Users(1, &quot;zch&quot;, 13));
</code></pre></div><h4 id="基于注解的ioc-di"><a href="#基于注解的ioc-di" class="header-anchor">#</a> 基于注解的IOC  &gt; DI</h4> <p>IOC思想的具体实现的技术</p> <p>必须在applicationContext.xml中添加包扫描,尽量具体，不要浪费时间</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;context:component-scan base-package=&quot;xyz.zch1337.dao,xyz.zch1337.pojo,xyz.zch1337.service.impl, xyz.zch1337.controller&quot;&gt;&lt;/context:component-scan&gt;
</code></pre></div><ol><li><p>创建对象的注解</p> <p>@Component:创建任意的对象，默认名称是类名的驼峰命名法,通过
@Component(&quot;名字&quot;)来指定</p> <p>@Controller:专于控制器的对象(Servlet)</p> <p>@Service:业务逻辑层</p> <p>@Repository:数据访问层</p></li> <li><p>依赖注入的注解</p> <p>值类型注入</p> <p>@Value:</p> <p>引用类型注入</p> <p>@AutoWired 使用类型注入</p> <p>@AutoWired@Qualifier使用名称注入</p> <div class="language- extra-class"><pre class="language-text"><code>@Autowired@Qualifier(&quot;school&quot;)
</code></pre></div></li></ol> <h4 id="为应用指定多个spring配置文件"><a href="#为应用指定多个spring配置文件" class="header-anchor">#</a> 为应用指定多个Spring配置文件</h4> <p>拆分配置文件</p> <ol><li><p>按层拆</p> <p><img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220731153441429.png" alt="image-20220731153441429"></p></li> <li><p>按功能拆</p></li></ol> <h4 id="spring配置文件的整合"><a href="#spring配置文件的整合" class="header-anchor">#</a> Spring配置文件的整合</h4> <div class="language- extra-class"><pre class="language-text"><code>在total.xml文件中
&lt;import resource=&quot;applicationContext_*.xml&quot;&gt;&lt;/import&gt;
测试读这个文件就可以了
</code></pre></div><h3 id="面向切面编程aop"><a href="#面向切面编程aop" class="header-anchor">#</a> 面向切面编程AOP</h3> <p>切面:公共的功能</p> <p>AOP:将切面单独开发</p> <h4 id="手写aop框架"><a href="#手写aop框架" class="header-anchor">#</a> 手写AOP框架</h4> <div class="language- extra-class"><pre class="language-text"><code>代码文件地址:D:\zhuchenghao\04-Code\02-Java\03Main\06-Spring\springall\spring_05_aop
</code></pre></div><h4 id="spring支持的aop实现"><a href="#spring支持的aop实现" class="header-anchor">#</a> Spring支持的AOP实现</h4> <p>Before、After、Throws、Around</p> <h4 id="aop常用的术语"><a href="#aop常用的术语" class="header-anchor">#</a> AOP常用的术语</h4> <ul><li>切面:通用的功能</li> <li>连接点:目标方法</li> <li>切入点(Pointcut):多个连接点构成切入点</li> <li>目标对象:被操作的对象</li> <li>通知(Advice):指定切入的时机</li></ul> <h4 id="aspectj框架"><a href="#aspectj框架" class="header-anchor">#</a> AspectJ框架</h4> <p>是一个java语言的面向切面的框架，提供切面实现</p> <ol><li><p>通知</p> <p>@Before:可以得到目标方法的签名</p> <p>@AfterReturning</p> <p>@Around</p> <p>@After</p></li> <li><p>切入点表达式 重点</p> <p>execution(访问权限 方法返回值 方法声明(参数) 异常类型)</p> <p>简化 execution(方法返回值 方法声明(参数))</p> <p>用到的符号:</p> <ul><li></li></ul> <p>.. 如果出现在方法的参数中，代表任意参数</p> <p>.. 如果出现在路径中，代表本路径及其所以子路径</p> <div class="language- extra-class"><pre class="language-text"><code>eg: 重点
	execution(public *  *(..))  任意的公共方法
	execution(*  set*(..))   任何一个以set开始的方法
	execution(* com.xyz.service.impl.*.*(..)) 任意的放回值类型，在com.xyz.service.impl中任意类的任意方法
	execution(* com.xyz.service..*.*(..))) 任意的放回值类型,在com.xyz.service路径及其所以子路径中任意类的任意方法
	execution(* *..service.*.*(..)) service之前可以用任意的包
	execution(* *.service.*.*(..)) service之前只能有一个包
</code></pre></div></li> <li><p>使用</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!--绑定--&gt;
&lt;aop:aspectj-autoproxy proxy-target-class=&quot;false&quot;&gt;&lt;/aop:aspectj-autoproxy&gt;

@Aspect@Component(&quot;myaspect1&quot;)
public class MyAspect {
    @Before(value = &quot;execution(public String xyz.zch1337.SomeServiceImpl.*(String, int))&quot;)
    public void myBefore() {
        System.out.println(&quot;前置功能实现&quot;);
    }
}

</code></pre></div></li> <li><p>各种通知规范</p> <div class="language- extra-class"><pre class="language-text"><code>@Before
访问权限是public
方法的返回值是void
方法名称自定义
方法没有参数，如果有只能是JoinPoint类型
参数value
可以得到目标方法的签名jp.getSignature()和参数jp.getArgs()

@Aspect@Component(&quot;myaspect1&quot;)
public class MyAspect {
    @Before(value = &quot;execution(public String xyz.zch1337.SomeServiceImpl.*(String, int))&quot;)
    public void myBefore(JoinPoint jp) {
        System.out.println(&quot;前置功能实现&quot;);
        System.out.println(&quot;@Before可以通过jp.getSignature()得到目标方法的签名&quot; + jp.getSignature());
        System.out.println(&quot;@Before可以通过jp.getArgs()得到目标方法的参数&quot; + Arrays.toString(jp.getArgs()));
    }
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>@AfterReturning
规范:
	访问权限是public
	方法没有返回值void
	方法名自定义
	方法有参数
	使用@AfterReturning注解
	参数:
		value:切入点表达式
		returning:指定目标方法的返回值的名称，且名称必须与切		   面方法的参数名称一致
	实现的功能:
		改变目标方法的返回值
代码实现:
    @AfterReturning(value = &quot;execution(public * xyz.zch1337.SomeServiceImpl.*(..))&quot;, 																returning = &quot;object&quot;)
    public void myAfter(Object object) {
        System.out.println(&quot;后置功能实现&quot;);
        if (object != null) {
            if (object instanceof String) {
                object = object.toString();
            }
//            在切面方法中改变目标方法的返回值
            if (object instanceof Student) {
                object = new Student(&quot;李四&quot;).toString();
            }
        }
        System.out.println(&quot;获取目标方法的返回值:&quot; + object);
    }
			
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>@Around环绕通知
通过拦截目标方法的方式，在目标方法前后增强功能的通过。
可以轻易的改变目标方法的返回值内容。
规范:
	访问权限是public
	切面方法有返回值，该返回值就是目标方法的返回值
	方法名称自定义
	方法有参数，就是目标方法的参数
	必须回避异常
    @Around(value = &quot;execution(* xyz.zch1337.SomeServiceImpl.*(..))&quot;)
    public Object myAround1(ProceedingJoinPoint pjp) throws Throwable {
        //前切功能实现
        System.out.println(&quot;myAround1前切功能实现&quot;);
        //目标方法调用
        Object obj = pjp.proceed(pjp.getArgs());
        //后切功能实现
        System.out.println(&quot;myAround1后切功能实现&quot;);
        return obj.toString().toUpperCase(Locale.ROOT);
    }	
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>@After最终通知
规范:
	public
	void
	名称自定义
	方法无参数，如果有只能是JoinPoint
@After(value = &quot;execution(* xyz.zch1337.SomeServiceImpl.doSome2(..))&quot;)
    public void myAfter() {
        //After功能实现
        System.out.println(&quot;After功能实现&quot;);
    }
</code></pre></div></li></ol> <h5 id="切入点表达式起别名"><a href="#切入点表达式起别名" class="header-anchor">#</a> 切入点表达式起别名</h5> <p>​</p> <div class="language- extra-class"><pre class="language-text"><code>    @After(value = &quot;mycut()&quot;)    //这里调用别名的方法
    public void myAfter() {
        //After功能实现
        System.out.println(&quot;After功能实现&quot;);
    }
    @Pointcut(value = &quot;execution(* xyz.zch1337.SomeServiceImpl.*(..))&quot;)
    public void mycut() {}
</code></pre></div><h3 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h3> <ul><li>注解式事务</li></ul> <p>​				在applicationContext_service.xml中添加配置</p> <div class="language- extra-class"><pre class="language-text"><code>        &lt;!--1.添加事务管理器--&gt;
        &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
            &lt;!--配置数据源 因为事务必须关联数据库处理--&gt;
            &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
        &lt;!--2.添加事务的注解驱动--&gt;
        &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;
</code></pre></div><p>​			 在AccountsServiceImpl中添加注解@Transactional</p> <div class="language- extra-class"><pre class="language-text"><code>@Transactional(propagation = Propagation.REQUIRED,
noRollbackForClassName = &quot;ArithmeticException&quot;)

propagation = Propagation.REQUIRED 事务的传播特性
noRollbackForClassName = &quot;ArithmeticException&quot;  多个为{&quot;&quot;, &quot;&quot;} 指定什么异常不回滚，使用的是异常的名称
noRollbackFor = ArithmeticException.class 使用的是异常的类名
rollbackForClassName = &quot;&quot; 指定发生什么异常必须回滚
rollbackFor = ArithmeticException.class,
timeout = -1 连接超时设置，默认值为-1，为永不超时
readOnly = false 默认是false，如果是查询操作，必须设置为true
isolation = Isolation.DEFAULT 使用数据库的自己的隔离级别
</code></pre></div><ul><li><p>声明式事务(重点)</p> <p>在配置文件中添加一次，整个项目遵循事务的设定</p> <p>数据库的隔离级别:</p> <ol><li><p>未提交读 Read Uncommitted</p></li> <li><p>提交读 Read Committed</p></li> <li><p>可重复读 Repeated Read</p></li> <li><p>串行读 Serializable</p></li> <li><p>默认的 isolation = Isolation.DEFAULT</p> <p>mysql：可重复度</p> <p>oracle：读已提交</p></li></ol> <p>​	方法命名规范</p> <ol><li>​	增加 add save insert set</li> <li>​    更新 update change modify</li> <li>​    删除 delete drop remove clear</li> <li>​    查询 select find search get</li></ol> <p>​	配置事务切面是可以使用通配符来匹配所有的</p></li> <li><p>为什么添加事务管理器</p> <p>不同框架的提交事务和回滚方法不同，事务管理器用来生成响应技术的连接+执行语句的对象。</p> <p>如果使用Mybatis框架，要在applicationContext_service.xml这么用</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!--1.添加事务管理器--&gt;
        &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
            &lt;!--配置数据源 因为事务必须关联数据库处理--&gt;
            &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
        &lt;!--2.添加事务的注解驱动--&gt;
        &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;
</code></pre></div></li> <li><p>spring事务的传播特性</p> <p>​	Propagation.REQUIRED 必备包含事务</p> <p>​	Propagation.REQUIRES_NEW 自己新开事务</p> <p>​	Propagation.SUPPORTS 支持事务，之前有事务，支持。如果没有，不单开事务</p> <p>​	Propagation.NEVER 不能运行在事务中，如果在，则抛异常</p> <p>​	Propagation.NOT_SUPPORTED 不支持事务，运行在非事务的环境</p> <p>​	Propagation.MANDATORY 必须包在事务内，否则抛异常</p> <p>​	Propagation.NESTED 嵌套事务</p> <p>​	<img src="C:%5CUsers%5CZhuChengHao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220816221611369.png" alt="image-20220816221611369"></p></li></ul> <p>​</p> <h2 id="sm整合"><a href="#sm整合" class="header-anchor">#</a> SM整合</h2> <h3 id="步骤"><a href="#步骤" class="header-anchor">#</a> 步骤</h3> <ol><li>建数据库表</li> <li>新建项目，选择quickstart模板</li> <li>修改目录</li> <li>修改pom.xml文件，添加相关的依赖</li> <li>添加Mybatis相应的模板(SqlMapConfig.xml和XXXMapper.xml文件)</li> <li>添加sqlMapConfig.xml文件(Mybatis核心配置文件)</li> <li>添加applicationContext_mapper.xml</li> <li>添加applicationContext_service.xml</li> <li>添加Users实体类,Account实体类</li> <li>添加mapper包，添加UsersMapper接口和UsersMapper.xml文件并开发</li> <li>添加service包，添加UsersService接口和UserServiceImpl实现类</li> <li>添加测试类进行功能测试</li></ol></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/houduan/springboot.html">
          springboot
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:0;" data-v-b57cc07c data-v-7dd95ae2></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.44fe8535.js" defer></script><script src="/assets/js/3.9cc2d08d.js" defer></script><script src="/assets/js/1.b21f7e85.js" defer></script><script src="/assets/js/12.d9fbb69c.js" defer></script>
  </body>
</html>
